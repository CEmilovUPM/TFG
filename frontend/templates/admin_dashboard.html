{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
  <form method="get" action="{{ url_for('protected.admin_dashboard') }}" class="goal-search-form">
    <input type="text" name="q" placeholder="Search users..." value="{{ request.args.get('q', '') }}" />
    <button type="submit">Search</button>
  </form>

  {% if users %}
    {% for user in users %}
      <div class="goal-container">
        <a href="{{ url_for('protected.goals_list', user_id=user.id) }}" class="goal-link">
          <div class="goal-info">
            <h2>{{ user.name }}</h2>
            <p>{{ user.email }}</p>
            <p>User ID: {{ user.id }}</p>
          </div>
        </a>
      </div>
    {% endfor %}
  {% else %}
    <p>No users found.</p>
  {% endif %}

  <style>
    .goal-search-form {
      margin: 15px 0;
      display: flex;
      gap: 10px;
    }

    .goal-search-form input {
      flex: 1;
      padding: 6px;
    }

    .goal-search-form button {
      padding: 6px 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .goal-search-form button:hover {
      background-color: #0056b3;
    }

    .goal-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
    }

    .goal-link {
      flex-grow: 1;
      text-decoration: none;
      color: inherit;
    }

    .goal-info h2 {
      margin: 0 0 5px;
    }

    .goal-info p {
      margin: 2px 0;
      font-size: 0.95rem;
    }
  </style>
{% endblock %}